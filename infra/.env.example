# Compose env vars (copy to .env before running docker compose)

# Core services
DATABASE_URL=postgres://postgres:postgres@timescaledb:5432/anomalies
KAFKA_BROKERS=redpanda:29092
REDIS_URL=redis://redis:6379/0
ALLOWED_ORIGINS=*

# Streams
BINANCE_STREAM=wss://stream.binance.com:9443/stream
SYMBOLS=btcusdt,ethusdt
NEWS_RSS=https://www.coindesk.com/arc/outboundfeeds/rss/
NEWS_ENRICHED_TOPIC=news-enriched
NEWS_DLQ_TOPIC=news-deadletter

# Anomaly thresholds
ALERT_THRESHOLD_1M=0.05
ALERT_THRESHOLD_5M=0.08
ALERT_THRESHOLD_15M=0.12

# Processor reliability defaults
HEADLINE_MAX_AGE_SEC=900
RSS_SEEN_TTL_SEC=86400
RSS_SEEN_MAX=5000
SUMMARIES_DLQ_TOPIC=summaries-deadletter
WINDOW_MAX_GAP_FACTOR=1.5
VOL_RESAMPLE_SEC=5
WINDOW_LABELS=1m,5m,15m
LATE_PRICE_TOLERANCE_SEC=0
ANOMALY_COOLDOWN_SEC=60
BAD_PRICE_LOG_EVERY=50
LATE_PRICE_LOG_EVERY=50
PRICE_PUBLISH_LOG_EVERY=500
NEWS_PUBLISH_LOG_EVERY=200
PRICE_FAILURE_LOG_EVERY=5
NEWS_FAILURE_LOG_EVERY=3
PRICE_BACKOFF_FAILURES_THRESHOLD=5
PRICE_BACKOFF_BASE_SEC=1
PRICE_BACKOFF_BASE_AFTER_FAILURES_SEC=2
PRICE_BACKOFF_CAP_SEC=60
NEWS_BACKOFF_FAILURES_THRESHOLD=5
NEWS_BACKOFF_BASE_SEC=5
NEWS_BACKOFF_BASE_AFTER_FAILURES_SEC=10
NEWS_BACKOFF_CAP_SEC=90
NEWS_POLL_INTERVAL_SEC=60
NEWS_BATCH_LIMIT=20
RETRY_MAX_ATTEMPTS=3
RETRY_BACKOFF_BASE_SEC=1
RETRY_BACKOFF_CAP_SEC=30

# LLM
LLM_PROVIDER=stub
OPENAI_API_KEY=
GOOGLE_API_KEY=

# Sentiment sidecar
SENTIMENT_PROVIDER=stub
# Model assets live at SENTIMENT_MODEL_PATH (default: /models/finbert).
# Expected files: model.onnx, tokenizer.json or vocab.txt, config.json, etc.
# Override this path if you keep models elsewhere.
SENTIMENT_MODEL_PATH=/models/finbert
SENTIMENT_BATCH_SIZE=16
SENTIMENT_MAX_LATENCY_MS=
SENTIMENT_FALLBACK_ON_SLOW=false
SENTIMENT_FAIL_FAST=false
SENTIMENT_LIGHT_RUNTIME=false
SENTIMENT_METRICS_HOST=0.0.0.0
SENTIMENT_METRICS_PORT=9101
SENTIMENT_SIDECAR_GROUP=sentiment-sidecar

# Frontend
NEXT_PUBLIC_API_BASE=http://localhost:8000
NEXT_PUBLIC_WS_BASE=ws://localhost:8000
